{% extends "base.html" %}
{% block content %}
<section class="card">
  <h2>Nahrát GPX</h2>
  <form class="grid2" action="/upload" method="post" enctype="multipart/form-data">
    <input type="file" name="file" accept=".gpx" required>
    <input type="text" name="horse_name" placeholder="Kůň (volitelné)">
    <input type="text" name="ride_title" placeholder="Název jízdy (volitelné)">
    <input type="date" name="ride_date">
    <button>Analyzovat & uložit</button>
  </form>
</section>
<section class="card">
  <h2>Jízdy</h2>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Datum</th><th>Název</th><th>Kůň</th><th>Km</th><th>Ø</th><th>Max</th><th></th></tr></thead>
      <tbody>
        {% for r in rides %}
        <tr>
          <td>{{ r.ride_date }}</td>
          <td><a href="/ride/{{ r.id }}">{{ r.title or ('Jízda #' ~ r.id) }}</a></td>
          <td>{{ r.horse.name if r.horse else '—' }}</td>
          <td>{{ '%.2f' % r.distance_km }}</td>
          <td>{{ '%.2f' % r.avg_speed_kmh }}</td>
          <td>{{ '%.2f' % r.max_speed_kmh }}</td>
          <td><a href="/gpx/{{ r.id }}">GPX</a></td>
        </tr>
        {% else %}
        <tr><td colspan="7" class="muted">Zatím žádné jízdy.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
