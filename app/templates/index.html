{% extends "base.html" %}
{% block content %}
<section class="card">
  <h2>Nahr√°t GPX</h2>
  <form class="grid2" action="/upload" method="post" enctype="multipart/form-data">
    <input type="file" name="file" accept=".gpx" required>
    <input type="text" name="horse_name" placeholder="K≈Ø≈à (voliteln√©)" list="horse-list">
    <datalist id="horse-list">
      {% for h in horses %}<option value="{{ h.name }}">{% endfor %}
    </datalist>
    <input type="text" name="ride_title" placeholder="N√°zev j√≠zdy (voliteln√©)">
    <input type="date" name="ride_date">
    <button>Analyzovat & ulo≈æit</button>
  </form>
</section>
<section class="card">
  <h2>J√≠zdy</h2>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Datum</th><th>N√°zev</th><th>K≈Ø≈à</th><th>Km</th><th>√ò</th><th>Max</th><th></th></tr></thead>
      <tbody>
        {% for r in rides %}
        <tr>
          <td>{{ r.ride_date }}</td>
          <td><a href="/ride/{{ r.id }}">{{ r.title or ('J√≠zda #' ~ r.id) }}</a></td>
          <td>{{ r.horse.name if r.horse else '‚Äî' }}</td>
          <td>{{ '%.2f' % r.distance_km }}</td>
          <td>{{ '%.2f' % r.avg_speed_kmh }}</td>
          <td>{{ '%.2f' % r.max_speed_kmh }}</td>
          <td>
            <form action="/ride/{{ r.id }}/delete" method="post" onsubmit="return confirm('Opravdu smazat tuto j√≠zdu?');">
              <button class="danger">üóë</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr><td colspan="7" class="muted">Zat√≠m ≈æ√°dn√© j√≠zdy.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
