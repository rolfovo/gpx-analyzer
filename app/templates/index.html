{% extends "base.html" %}
{% block content %}
<section class="card">
  <h2>Nahrát GPX</h2>
  <form action="/upload" method="post" enctype="multipart/form-data" class="grid">
    <div><label>Soubor GPX</label><input type="file" name="file" accept=".gpx" required></div>
    <div><label>Kůň (volitelné)</label><input type="text" name="horse_name" list="horse_list" placeholder="např. Orin"><datalist id="horse_list">{% for h in horses %}<option value="{{ h.name }}">{% endfor %}</datalist></div>
    <div><label>Název jízdy</label><input type="text" name="ride_title" placeholder="např. Sobota – Panský les"></div>
    <div><label>Datum jízdy</label><input type="date" name="ride_date"></div>
    <div class="row"><button type="submit">Analyzovat & uložit</button></div>
  </form>
</section>

<section class="card">
  <h2>Souhrny</h2>
  <div class="grid">
    <div class="row">
      <h3>Měsíční</h3>
      <table><thead><tr><th>Období</th><th>Jízd</th><th>Km</th><th>Ø km/h</th></tr></thead>
      <tbody>{% for m in monthly %}<tr><td>{{ m.period }}</td><td>{{ m.rides }}</td><td>{{ '%.2f' % m.km }}</td><td>{{ '%.2f' % m.avg_kmh }}</td></tr>{% endfor %}</tbody></table>
    </div>
    <div class="row">
      <h3>Týdenní</h3>
      <table><thead><tr><th>Období</th><th>Jízd</th><th>Km</th><th>Ø km/h</th></tr></thead>
      <tbody>{% for m in weekly %}<tr><td>{{ m.period }}</td><td>{{ m.rides }}</td><td>{{ '%.2f' % m.km }}</td><td>{{ '%.2f' % m.avg_kmh }}</td></tr>{% endfor %}</tbody></table>
    </div>
    <div class="row">
      <h3>Roční</h3>
      <table><thead><tr><th>Období</th><th>Jízd</th><th>Km</th><th>Ø km/h</th></tr></thead>
      <tbody>{% for m in yearly %}<tr><td>{{ m.period }}</td><td>{{ m.rides }}</td><td>{{ '%.2f' % m.km }}</td><td>{{ '%.2f' % m.avg_kmh }}</td></tr>{% endfor %}</tbody></table>
    </div>
  </div>
</section>
{% endblock %}
